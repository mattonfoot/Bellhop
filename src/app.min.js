app=function(a,b,c){function g(a,b){b&&!d[a]&&(d[a]=b)}function h(a){if(!a)return i();j(a)}function i(){for(module in d)j(module)}function j(a){d[a]&&(p(a),delete d[a])}function k(a){if(!a)return l();m(a)}function l(){for(module in d)m(module)}function m(a){!e[a]&&d[a]&&(e[a]=d[a],e[a]=d[a].call({},f),e[a].start&&e[a].start())}function n(a){if(!a)return o();p(a)}function o(){for(module in d)p(module)}function p(a){e[a]&&(e[a].stop&&e[a].stop(),delete e[a])}function q(a){return{module:d[a],instance:e[a]}}function r(a,b){if(f[a])throw"Sandbox extension already defined";f[a]=b}var d={},e={},f={},s=function(){};return s.prototype={register:g,unregister:h,module:q,extend:r,start:k,stop:n},new s}(this,this.document,undefined);